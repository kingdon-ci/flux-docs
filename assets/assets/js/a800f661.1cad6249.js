"use strict";(self.webpackChunkweave_gitops_docs=self.webpackChunkweave_gitops_docs||[]).push([[10167],{72503:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(67294),r=n(88746);n(52426);const i={fontSize:16,marginLeft:4,fontVariant:"all-small-caps"};function l(e){let{tiers:t}=e;return a.createElement(r.Z,{title:`This feature is a available on ${t}.`,style:i},t)}},19953:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(87462),r=(n(67294),n(3905));const i={toc:[]};function l(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"This feature is in alpha and certain aspects will change")),(0,r.kt)("p",{parentName:"admonition"},"We're very excited for people to use this feature.\nHowever, please note that changes in the API, behaviour and security will evolve.\nThe feature is suitable to use in controlled testing environments.")))}l.isMDXComponent=!0},71725:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>p,toc:()=>d});var a=n(87462),r=(n(67294),n(3905)),i=n(72503),l=n(19953);const o={title:"Querying",hide_title:!0},s='Querying <TierLabel tiers="Enterprise" />',p={unversionedId:"explorer/querying",id:"version-0.22.0/explorer/querying",title:"Querying",description:"Explorer recommended way to discover resources is via its search dialog. This guide provides the background to understand",source:"@site/versioned_docs/version-0.22.0/explorer/querying.mdx",sourceDirName:"explorer",slug:"/explorer/querying",permalink:"/docs/0.22.0/explorer/querying",draft:!1,editUrl:"https://github.com/weaveworks/weave-gitops/edit/main/website/versioned_docs/version-0.22.0/explorer/querying.mdx",tags:[],version:"0.22.0",frontMatter:{title:"Querying",hide_title:!0},sidebar:"docs",previous:{title:"Configuration",permalink:"/docs/0.22.0/explorer/configuration"},next:{title:"Operations",permalink:"/docs/0.22.0/explorer/operations"}},u={},d=[{value:"Schema",id:"schema",level:2},{value:"Querying",id:"querying",level:2},{value:"Filter by key and value",id:"filter-by-key-and-value",level:3},{value:"Filter by value",id:"filter-by-value",level:3},{value:"Operators",id:"operators",level:3},{value:"AND",id:"and",level:4},{value:"FAQ",id:"faq",level:2},{value:"How can I discover resources from a cluster?",id:"how-can-i-discover-resources-from-a-cluster",level:3},{value:"How can I discover resources from a namespace?",id:"how-can-i-discover-resources-from-a-namespace",level:3},{value:"How can I discover applications?",id:"how-can-i-discover-applications",level:3},{value:"How can I discover failed applications?",id:"how-can-i-discover-failed-applications",level:3},{value:"How can I discover resources by name?",id:"how-can-i-discover-resources-by-name",level:3}],c={toc:d};function m(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"querying-"},"Querying ",(0,r.kt)(i.Z,{tiers:"Enterprise",mdxType:"TierLabel"})),(0,r.kt)(l.ZP,{mdxType:"AlphaWarning"}),(0,r.kt)("p",null,"Explorer recommended way to discover resources is via its search dialog. This guide provides the background to understand\nit and set how to use it."),(0,r.kt)("h2",{id:"schema"},"Schema"),(0,r.kt)("p",null,"Every resource is normalised to the following common schema:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Key")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Cluster"),(0,r.kt)("td",{parentName:"tr",align:null},"Name of cluster where the resource exists. As gitops cluster ",(0,r.kt)("inlineCode",{parentName:"td"},"<GitopsClusterNamespace,GitopsClusterName>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Namespace"),(0,r.kt)("td",{parentName:"tr",align:null},"Namespace name where the resource exists.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Kind"),(0,r.kt)("td",{parentName:"tr",align:null},"Resource kubernetes type or ",(0,r.kt)("a",{parentName:"td",href:"https://kubernetes.io/docs/reference/using-api/api-concepts/#standard-api-terminology"},"kind"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Name"),(0,r.kt)("td",{parentName:"tr",align:null},"Resource name as specified in its manifest.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Status"),(0,r.kt)("td",{parentName:"tr",align:null},"Resource health status. Indicates the status of its reconciliation.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Message"),(0,r.kt)("td",{parentName:"tr",align:null},"Resource health status message. It extends status field with information about the status.")))),(0,r.kt)("p",null,"For a ",(0,r.kt)("inlineCode",{parentName:"p"},"podinfo")," helm release from a cluster ",(0,r.kt)("inlineCode",{parentName:"p"},"default/progress-delivery-demo2-32")," like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: helm.toolkit.fluxcd.io/v2beta1\nkind: HelmRelease\nmetadata:\n  name: podinfo\n  namespace: flux-system\nspec:\n  chart:\n    spec:\n      chart: podinfo\n      interval: 1m\n      reconcileStrategy: ChartVersion\n      sourceRef:\n        kind: HelmRepository\n        name: podinfo\n      version: 6.0.0\n  interval: 1m\nstatus:\n  conditions:\n  - message: Release reconciliation succeeded\n    reason: ReconciliationSucceeded\n    status: "True"\n    type: Ready\n')),(0,r.kt)("p",null,"The schema looks like"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Cluster"),(0,r.kt)("th",{parentName:"tr",align:null},"Namespace"),(0,r.kt)("th",{parentName:"tr",align:null},"Kind"),(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Status"),(0,r.kt)("th",{parentName:"tr",align:null},"Message"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"default/progress-delivery-demo2-32")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"flux-system")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"HelmRelease")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"podinfo")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Success")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Release reconciliation succeeded"))))),(0,r.kt)("p",null,"And represented in the UI like"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"explorer",src:n(32275).Z,width:"1264",height:"422"})),(0,r.kt)("h2",{id:"querying"},"Querying"),(0,r.kt)("p",null,"Based on the previous schema you have two main modes to discover or filter the data"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Filter by key and value: when you know the pair <key,value> that you want to filter from."),(0,r.kt)("li",{parentName:"ol"},"Filter by value: when you want to filter across keys or does not know the key")),(0,r.kt)("admonition",{title:"Matching",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"For ",(0,r.kt)("inlineCode",{parentName:"p"},"key:value")," filter the results would be those results where ",(0,r.kt)("inlineCode",{parentName:"p"},"key=value")," exactly.")),(0,r.kt)("h3",{id:"filter-by-key-and-value"},"Filter by key and value"),(0,r.kt)("p",null,"You search with the format ",(0,r.kt)("inlineCode",{parentName:"p"},"key:value")," indicating that you want to filter the resources matching the key and value.\nA couple of examples could be:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"kind:HelmRelease")," to filter all helm releases."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"status:Failed")," to find all failing resources.")),(0,r.kt)("h3",{id:"filter-by-value"},"Filter by value"),(0,r.kt)("p",null,"You search with a single term ",(0,r.kt)("inlineCode",{parentName:"p"},"value")," indicating that you want to filter across the supported keys by values.\nThe value would be search cross keys: ",(0,r.kt)("inlineCode",{parentName:"p"},"name"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"cluster")," as synthatic sugar for ",(0,r.kt)("inlineCode",{parentName:"p"},"name:value")," OR ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace:value")," OR ",(0,r.kt)("inlineCode",{parentName:"p"},"cluster:value"),"."),(0,r.kt)("p",null,"An example cold be using ",(0,r.kt)("inlineCode",{parentName:"p"},"podinfo")," that would translate into ",(0,r.kt)("inlineCode",{parentName:"p"},"name:podinfo")," OR ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace:podinfo")," OR ",(0,r.kt)("inlineCode",{parentName:"p"},"cluster:podinfo"),"."),(0,r.kt)("h3",{id:"operators"},"Operators"),(0,r.kt)("h4",{id:"and"},"AND"),(0,r.kt)("p",null,"You could refine filtered results by using AND semantics adding different filters."),(0,r.kt)("p",null,"For example if you want to have all the resources within ",(0,r.kt)("inlineCode",{parentName:"p"},"flux-system")," namespace from ",(0,r.kt)("inlineCode",{parentName:"p"},"management")," cluster you could\ncreate a query like the following:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"and query",src:n(85649).Z,width:"862",height:"561"})),(0,r.kt)("p",null,"with two sequential filters ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace:flux-system")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"cluster:management")," to achieve it."),(0,r.kt)("h2",{id:"faq"},"FAQ"),(0,r.kt)("p",null,"Here a set of questions around querying to allow you get started by practice."),(0,r.kt)("h3",{id:"how-can-i-discover-resources-from-a-cluster"},"How can I discover resources from a cluster?"),(0,r.kt)("p",null,"You could use the single term with ",(0,r.kt)("inlineCode",{parentName:"p"},"clusterName")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"cluster:clusterName")),(0,r.kt)("p",null,"For example for management cluster could be ",(0,r.kt)("inlineCode",{parentName:"p"},"management")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"cluster:management")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"filter by cluster",src:n(61647).Z,width:"1246",height:"384"})),(0,r.kt)("h3",{id:"how-can-i-discover-resources-from-a-namespace"},"How can I discover resources from a namespace?"),(0,r.kt)("p",null,"You could use the single term with ",(0,r.kt)("inlineCode",{parentName:"p"},"namespaceName")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace:namespaceName"),"."),(0,r.kt)("h3",{id:"how-can-i-discover-applications"},"How can I discover applications?"),(0,r.kt)("p",null,"You should filter by kind where kind could be either HelmRelease or Kustomization like ",(0,r.kt)("inlineCode",{parentName:"p"},"kind:Kustomization")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"kind:HelmRelease"),".\nYou could also use the pre-built filters."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"filter by kind",src:n(8507).Z,width:"1056",height:"443"})),(0,r.kt)("admonition",{title:"Exact Matching",type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Remember that ",(0,r.kt)("inlineCode",{parentName:"p"},"key:value")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"key=value")),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"kind:HelmRelease")," returns all Helm Releases apps"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"kind:helmrelease")," wont return anything"))),(0,r.kt)("h3",{id:"how-can-i-discover-failed-applications"},"How can I discover failed applications?"),(0,r.kt)("p",null,"You should filter by ",(0,r.kt)("inlineCode",{parentName:"p"},"status:Failed")," to find the failing apps or use the pre-built filters."),(0,r.kt)("h3",{id:"how-can-i-discover-resources-by-name"},"How can I discover resources by name?"),(0,r.kt)("p",null,"You could use the single term with ",(0,r.kt)("inlineCode",{parentName:"p"},"resourceName")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"name:resourceName"),"."))}m.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,k=d["".concat(s,".").concat(m)]||d[m]||c[m]||i;return n?a.createElement(k,l(l({ref:t},u),{},{components:n})):a.createElement(k,l({ref:t},u))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},85649:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/explorer-query-and-00304356d310c92c3a887294e050efea.png"},61647:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/explorer-query-filter-cluster-0fd5e6b2cc2d97b5d03bacde7ff2a935.png"},8507:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/explorer-query-filter-kind-7b426fb838de6114012072eb9498eb37.png"},32275:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/explorer-query-overview-bbd3dcf7e9ce1232ecc4bf49f618f94d.png"}}]);