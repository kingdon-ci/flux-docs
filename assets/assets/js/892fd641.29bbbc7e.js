"use strict";(self.webpackChunkweave_gitops_docs=self.webpackChunkweave_gitops_docs||[]).push([[7254],{32342:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(67294),r=n(86010);const o="tabItem_Ymn6";function l(e){let{children:t,hidden:n,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,l),hidden:n},t)}},71125:(e,t,n)=>{n.d(t,{Z:()=>x});var a=n(87462),r=n(67294),o=n(86010),l=n(63735),i=n(16550),s=n(34423),u=n(20636),p=n(99200);function c(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function d(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??c(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=d(e),[l,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[s,u]=h({queryString:n,groupId:a}),[c,f]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,p.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),k=(()=>{const e=s??c;return m({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{k&&i(k)}),[k]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),f(e)}),[u,f,o]),tabValues:o}}var k=n(5730);const g="tabList__CuJ",v="tabItem_LNqP";function y(e){let{className:t,block:n,selectedValue:i,selectValue:s,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.o5)(),d=e=>{const t=e.currentTarget,n=p.indexOf(t),a=u[n].value;a!==i&&(c(t),s(a))},m=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=p.indexOf(e.currentTarget)+1;t=p[n]??p[0];break}case"ArrowLeft":{const n=p.indexOf(e.currentTarget)-1;t=p[n]??p[p.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:l}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>p.push(e),onKeyDown:m,onClick:d},l,{className:(0,o.Z)("tabs__item",v,l?.className,{"tabs__item--active":i===t})}),n??t)})))}function b(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function w(e){const t=f(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",g)},r.createElement(y,(0,a.Z)({},e,t)),r.createElement(b,(0,a.Z)({},e,t)))}function x(e){const t=(0,k.Z)();return r.createElement(w,(0,a.Z)({key:String(t)},e))}},67043:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>u,toc:()=>c});var a=n(87462),r=(n(67294),n(3905)),o=n(71125),l=n(32342);const i={title:"Step 1 - Install Weave GitOps Open Source",hide_title:!0,pagination_next:"open-source/getting-started/ui-OSS"},s="Step 1: Install Weave GitOps Open Source on Your Cluster",u={unversionedId:"open-source/getting-started/install-OSS",id:"open-source/getting-started/install-OSS",title:"Step 1 - Install Weave GitOps Open Source",description:"These instructions only apply to Weave GitOps Open Source. To install Weave GitOps Enterprise, go here.",source:"@site/docs/open-source/getting-started/install-OSS.mdx",sourceDirName:"open-source/getting-started",slug:"/open-source/getting-started/install-OSS",permalink:"/docs/next/open-source/getting-started/install-OSS",draft:!1,editUrl:"https://github.com/weaveworks/weave-gitops/edit/main/website/docs/open-source/getting-started/install-OSS.mdx",tags:[],version:"current",frontMatter:{title:"Step 1 - Install Weave GitOps Open Source",hide_title:!0,pagination_next:"open-source/getting-started/ui-OSS"},sidebar:"docs",previous:{title:"Introducing Weave GitOps",permalink:"/docs/next/intro-weave-gitops"},next:{title:"Step 2 - Explore the Open Source UI",permalink:"/docs/next/open-source/getting-started/ui-OSS"}},p={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Check your Cluster&#39;s Kubernetes Version",id:"check-your-clusters-kubernetes-version",level:3},{value:"Install Flux",id:"install-flux",level:3},{value:"Install the Flux CLI",id:"install-the-flux-cli",level:4},{value:"Export your credentials",id:"export-your-credentials",level:4},{value:"Check your Kubernetes cluster",id:"check-your-kubernetes-cluster",level:4},{value:"Install Flux onto your cluster with the <code>flux bootstrap</code> command",id:"install-flux-onto-your-cluster-with-the-flux-bootstrap-command",level:4},{value:"Install the <code>gitops</code> CLI",id:"install-the-gitops-cli",level:3},{value:"Install Weave GitOps",id:"install-weave-gitops",level:2},{value:"Clone your Git repository where Flux has been bootstrapped",id:"clone-your-git-repository-where-flux-has-been-bootstrapped",level:4},{value:"Deploy",id:"deploy",level:4},{value:"Commit and push the <code>weave-gitops-dashboard.yaml</code> to the <code>fleet-infra</code> repository",id:"commit-and-push-the-weave-gitops-dashboardyaml-to-the-fleet-infra-repository",level:4},{value:"Validate that Weave GitOps and Flux are installed",id:"validate-that-weave-gitops-and-flux-are-installed",level:4},{value:"Supercharge your Weave GitOps",id:"supercharge-your-weave-gitops",level:2},{value:"View them in the UI",id:"view-them-in-the-ui",level:3},{value:"Next steps",id:"next-steps",level:2}],d={toc:c};function m(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"step-1-install-weave-gitops-open-source-on-your-cluster"},"Step 1: Install Weave GitOps Open Source on Your Cluster"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"These instructions only apply to Weave GitOps Open Source. To install Weave GitOps Enterprise, ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/enterprise/getting-started/install-enterprise"},"go here"),".")),(0,r.kt)("p",null,"This page covers Weave GitOps Open Source installation and is adapted from the ",(0,r.kt)("a",{parentName:"p",href:"https://fluxcd.io/docs/get-started/"},"Flux - Getting Started")," guide."),(0,r.kt)("p",null,"If you haven't already, please check out our ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/intro-weave-gitops"},"Introduction to Weave GitOps")," page for additional information about Weave GitOps Open Source as well as our Enterprise version."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"Before you can install Weave GitOps Open Source, you will need:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"An account with a Git provider like GitHub or GitLab, along with a personal access token with repo permissions; if you're using GitHub, for example, ",(0,r.kt)("a",{parentName:"li",href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token"},"go here")),(0,r.kt)("li",{parentName:"ul"},"Your Git client configured properly (if using GitHub, for example,\nthen review their docs on ",(0,r.kt)("a",{parentName:"li",href:"https://docs.github.com/en/get-started/getting-started-with-git/setting-your-username-in-git#setting-your-git-username-for-every-repository-on-your-computer"},"setting your username")," and\n",(0,r.kt)("a",{parentName:"li",href:"https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-email-preferences/setting-your-commit-email-address#setting-your-email-address-for-every-repository-on-your-computer"},"your email address"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.docker.com/products/docker-desktop/"},"Docker Desktop")),(0,r.kt)("li",{parentName:"ul"},"A Kubernetes cluster such as ",(0,r.kt)("a",{parentName:"li",href:"https://kind.sigs.k8s.io/docs/user/quick-start/"},"Kind")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/tasks/tools/#kubectl"},"kubectl")),(0,r.kt)("li",{parentName:"ul"},"A public GitHub repo called ",(0,r.kt)("inlineCode",{parentName:"li"},"fleet-infra"),". To create this, follow ",(0,r.kt)("a",{parentName:"li",href:"https://docs.github.com/en/github-ae@latest/get-started/quickstart/create-a-repo"},"GitHub\u2019s instructions"),"\u2014using ",(0,r.kt)("inlineCode",{parentName:"li"},"fleet-infra")," instead of ",(0,r.kt)("inlineCode",{parentName:"li"},"hello-world"),".")),(0,r.kt)("p",null,"We also recommend taking a look at the ",(0,r.kt)("a",{parentName:"p",href:"https://fluxcd.io/flux/concepts/"},"Flux Core Concepts page")," if you need to brush up on terminology."),(0,r.kt)("h3",{id:"check-your-clusters-kubernetes-version"},"Check your Cluster's Kubernetes Version"),(0,r.kt)("p",null,"No matter which version of Weave GitOps you install, you need to have a Kubernetes cluster up\nand running. We test Weave GitOps against the latest ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/releases/"},"supported Kubernetes releases"),"."),(0,r.kt)("p",null,"Note that the version of ",(0,r.kt)("a",{parentName:"p",href:"https://fluxcd.io/docs/installation/#prerequisites"},"Flux")," that you use might impose further minimum version requirements."),(0,r.kt)("h3",{id:"install-flux"},"Install Flux"),(0,r.kt)("p",null,"Weave GitOps is an extension to Flux. Therefore, it requires that Flux 0.32 or a\nlater version has already been installed on your Kubernetes cluster. Full documentation\nis available ",(0,r.kt)("a",{parentName:"p",href:"https://fluxcd.io/docs/installation/"},"here"),"."),(0,r.kt)("p",null,"In this section we are going to do the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add Flux component manifests to the repository"),(0,r.kt)("li",{parentName:"ul"},"Deploy Flux components to your Kubernetes cluster"),(0,r.kt)("li",{parentName:"ul"},"Configure the Flux components to track the path ",(0,r.kt)("inlineCode",{parentName:"li"},"./clusters/my-cluster/")," in the repository")),(0,r.kt)("p",null,"Let's get into it... \u2728"),(0,r.kt)("h4",{id:"install-the-flux-cli"},"Install the Flux CLI"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"brew install fluxcd/tap/flux\n")),(0,r.kt)("p",null,"To upgrade to the latest version, run this command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"brew upgrade fluxcd/tap/flux\n")),(0,r.kt)("p",null,"We recommend upgrading the CLI before running bootstrap to upgrade the controllers with ",(0,r.kt)("inlineCode",{parentName:"p"},"flux bootstrap"),"."),(0,r.kt)("p",null,"Find which version is installed with ",(0,r.kt)("inlineCode",{parentName:"p"},"flux -v"),", and use that for ",(0,r.kt)("inlineCode",{parentName:"p"},"flux bootstrap --version=v<CLI-VERSION>"),"."),(0,r.kt)("p",null,"With Bash, you can run ",(0,r.kt)("inlineCode",{parentName:"p"},"sudo curl -s https://fluxcd.io/install.sh | sudo FLUX_VERSION=<VERSION> bash"),"."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If you want to install an older version of Flux CLI, you can download the binary for your OS from the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/fluxcd/flux2/releases"},"releases page"),".")),(0,r.kt)("p",null,"For other installation methods, see the relevant ",(0,r.kt)("a",{parentName:"p",href:"https://fluxcd.io/docs/installation/"},"Flux documentation"),"."),(0,r.kt)("h4",{id:"export-your-credentials"},"Export your credentials"),(0,r.kt)("p",null,"Ensure your PAT has ",(0,r.kt)("inlineCode",{parentName:"p"},"repo")," scope."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"export GITHUB_TOKEN=<your-token>\nexport GITHUB_USER=<your-username>\n")),(0,r.kt)("h4",{id:"check-your-kubernetes-cluster"},"Check your Kubernetes cluster"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"flux check --pre\n")),(0,r.kt)("p",null,"   The output is similar to:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u25ba checking prerequisites\n\u2714 kubernetes 1.22.2 >=1.20.6\n\u2714 prerequisites checks passed\n")),(0,r.kt)("h4",{id:"install-flux-onto-your-cluster-with-the-flux-bootstrap-command"},"Install Flux onto your cluster with the ",(0,r.kt)("inlineCode",{parentName:"h4"},"flux bootstrap")," command"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"flux bootstrap")," creates a ",(0,r.kt)("inlineCode",{parentName:"p"},"flux system")," folder in your repository that includes the manifests Flux needs to operate. It also generates a key value pair for Flux to access the repo."),(0,r.kt)("p",null,"The command below assumes the Git provider is ",(0,r.kt)("inlineCode",{parentName:"p"},"github"),". If you would rather use GitLab, change this to ",(0,r.kt)("inlineCode",{parentName:"p"},"gitlab"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"flux bootstrap github \\\n  --owner=$GITHUB_USER \\\n  --repository=fleet-infra \\\n  --branch=main \\\n  --path=./clusters/my-cluster \\\n  --personal \\\n  --components-extra image-reflector-controller,image-automation-controller\n")),(0,r.kt)("p",null,"Full installation documentation, including how to work with other Git providers, is available ",(0,r.kt)("a",{parentName:"p",href:"https://fluxcd.io/docs/installation/"},"here"),"."),(0,r.kt)("h3",{id:"install-the-gitops-cli"},"Install the ",(0,r.kt)("inlineCode",{parentName:"h3"},"gitops")," CLI"),(0,r.kt)("p",null,"Weave GitOps includes a command-line interface to help users create and manage resources. The ",(0,r.kt)("inlineCode",{parentName:"p"},"gitops")," CLI is currently supported on Mac (x86 and Arm) and Linux, including Windows Subsystem for Linux (WSL). Windows support is a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/weaveworks/weave-gitops/issues/663"},"planned enhancement"),"."),(0,r.kt)("p",null,"There are multiple ways to install the ",(0,r.kt)("inlineCode",{parentName:"p"},"gitops")," CLI:"),(0,r.kt)(o.Z,{groupId:"installation",default:!0,mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"curl",label:"curl",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl --silent --location "https://github.com/weaveworks/weave-gitops/releases/download/v0.38.0/gitops-$(uname)-$(uname -m).tar.gz" | tar xz -C /tmp\nsudo mv /tmp/gitops /usr/local/bin\ngitops version\n'))),(0,r.kt)(l.Z,{value:"homebrew",label:"Homebrew",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"brew tap weaveworks/tap\nbrew install weaveworks/tap/gitops\n")))),(0,r.kt)("h2",{id:"install-weave-gitops"},"Install Weave GitOps"),(0,r.kt)("p",null,"In this section we will:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"use the GitOps CLI tool to generate ",(0,r.kt)("a",{parentName:"li",href:"https://fluxcd.io/flux/components/helm/helmreleases/"},(0,r.kt)("inlineCode",{parentName:"a"},"HelmRelease"))," and ",(0,r.kt)("a",{parentName:"li",href:"https://fluxcd.io/flux/components/source/helmrepositories/#writing-a-helmrepository-spec"},(0,r.kt)("inlineCode",{parentName:"a"},"HelmRepository"))," objects."),(0,r.kt)("li",{parentName:"ul"},"create some login credentials to access the dashboard. This is a simple but ",(0,r.kt)("strong",{parentName:"li"},"insecure"),"\nmethod of protecting and accessing your GitOps dashboard."),(0,r.kt)("li",{parentName:"ul"},"commit the generated yamls to our ",(0,r.kt)("inlineCode",{parentName:"li"},"fleet-infra")," repo."),(0,r.kt)("li",{parentName:"ul"},"observe that they are synced to the cluster.")),(0,r.kt)("h4",{id:"clone-your-git-repository-where-flux-has-been-bootstrapped"},"Clone your Git repository where Flux has been bootstrapped"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"git clone https://github.com/$GITHUB_USER/fleet-infra\ncd fleet-infra\n")),(0,r.kt)("p",null,"If you have difficulty saving the YAML to the correct path, run the command ",(0,r.kt)("inlineCode",{parentName:"p"},"mkdir -p ./clusters/my-cluster"),"."),(0,r.kt)("h4",{id:"deploy"},"Deploy"),(0,r.kt)("p",null,"Run the following command, which will create a ",(0,r.kt)("inlineCode",{parentName:"p"},"HelmRepository")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"HelmRelease")," to deploy Weave GitOps:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'PASSWORD="<A new password you create, removing the brackets and including the quotation marks>"\ngitops create dashboard ww-gitops \\\n  --password=$PASSWORD \\\n  --export > ./clusters/my-cluster/weave-gitops-dashboard.yaml\n')),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"This command stores a hash of a password. This is relatively safe for demo and testing purposes, but we strongly\nrecommend using a more secure method of storing secrets (such as ",(0,r.kt)("a",{parentName:"p",href:"https://fluxcd.io/docs/guides/mozilla-sops/"},"Flux's SOPS integration"),") for production systems."),(0,r.kt)("p",{parentName:"admonition"},"Our docs on ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/enterprise/getting-started/install-enterprise#configuring-the-emergency-user"},"securing access to the dashboard")," provide additional guidance and alternative login methods.")),(0,r.kt)("p",null,"You will use the password you've just created when you've finished Weave GitOps Open Source installation and are ready to login to the dashboard UI."),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Currently, we do not have a persistent session storage, this means that if you scale to multiple replicas, logins will not be persisted.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If you need to customize the Weave GitOps Helm release, you can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"--values")," CLI flag to supply one or more values files.")),(0,r.kt)("h4",{id:"commit-and-push-the-weave-gitops-dashboardyaml-to-the-fleet-infra-repository"},"Commit and push the ",(0,r.kt)("inlineCode",{parentName:"h4"},"weave-gitops-dashboard.yaml")," to the ",(0,r.kt)("inlineCode",{parentName:"h4"},"fleet-infra")," repository"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'git add -A && git commit -m "Add Weave GitOps Dashboard"\ngit push\n')),(0,r.kt)("h4",{id:"validate-that-weave-gitops-and-flux-are-installed"},"Validate that Weave GitOps and Flux are installed"),(0,r.kt)("p",null,"Note: this wont be instantaneous. Give the Flux controllers a couple of minutes to pull the latest commit."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"kubectl get pods -n flux-system\n")),(0,r.kt)("p",null,"   You should see something similar to:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"NAME                                       READY   STATUS    RESTARTS   AGE\nhelm-controller-5bfd65cd5f-gj5sz           1/1     Running   0          10m\nkustomize-controller-6f44c8d499-s425n      1/1     Running   0          10m\nnotification-controller-844df5f694-2pfcs   1/1     Running   0          10m\nsource-controller-6b6c7bc4bb-ng96p         1/1     Running   0          10m\nww-gitops-weave-gitops-86b645c9c6-k9ftg    1/1     Running   0          5m\n")),(0,r.kt)("p",null,"If you wait for a while and still nothing happens, it might be that your manifests haven\u2019t been exported to the repository. This means that Weave GitOps won't install."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"You can use the Weave GitOps Helm Chart to customize your installation.\nFind the full Chart reference ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/references/helm-reference"},"here"),".")),(0,r.kt)("h2",{id:"supercharge-your-weave-gitops"},"Supercharge your Weave GitOps"),(0,r.kt)("p",null,"You could optionally unlock more from Weave GitOps by installing other components:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"../../../policy/intro/"},"Policy Agent:")," for policy enforcement. Use the Flux Manifests ",(0,r.kt)("a",{parentName:"li",href:"https://raw.githubusercontent.com/weaveworks/tf-controller/main/docs/release.yaml"},"Here"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"../../../terraform/terraform-intro/"},"Tf-Controller:")," for infrastructure management. Use the Flux Manifests ",(0,r.kt)("a",{parentName:"li",href:"https://raw.githubusercontent.com/weaveworks/policy-agent/dev/docs/examples/policy-agent-helmrelease.yaml"},"Here"))),(0,r.kt)("h3",{id:"view-them-in-the-ui"},"View them in the UI"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Enable the feature flag ",(0,r.kt)("a",{parentName:"li",href:"/docs/next/references/helm-reference"},"WEAVE_GITOPS_FEATURE_GITOPS_RUNTIME"),"."),(0,r.kt)("li",{parentName:"ol"},"Leverage ",(0,r.kt)("a",{parentName:"li",href:"https://fluxcd.io/flux/components/helm/helmreleases/#post-renderers"},"Flux Post-Rendering")," to label Deployments and CRDs with  ",(0,r.kt)("inlineCode",{parentName:"li"},"app.kubernetes.io/part-of: weave-gitops"))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Expand to see a simplified example for TF-controller"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: helm.toolkit.fluxcd.io/v2beta2\nkind: HelmRelease\nmetadata:\n  name: tf-controller\n  namespace: flux-system\nspec:\n  # ... omitted for simplicity\n  interval: 1h0s\n  postRenderers:\n  - kustomize:\n      patchesStrategicMerge:\n      - apiVersion: apps/v1\n        kind: Deployment\n        metadata:\n          labels:\n            app.kubernetes.io/part-of: weave-gitops\n          name: tf-controller\n      - apiVersion: apiextensions.k8s.io/v1\n        kind: CustomResourceDefinition\n        metadata:\n          labels:\n            app.kubernetes.io/part-of: weave-gitops\n          name: terraforms.infra.contrib.fluxcd.io\n")),(0,r.kt)("p",null,"Deploy it and see controllers and CRDs in the UI:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Runtime view showing Terraform CRDs",src:n(50879).Z,width:"986",height:"378"}),"\n:::")),(0,r.kt)("h2",{id:"next-steps"},"Next steps"),(0,r.kt)("p",null,"Now let's ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/open-source/getting-started/ui-OSS"},"explore the Weave GitOps Open Source UI"),". Then, we'll deploy an application."))}m.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(n),m=r,h=c["".concat(s,".").concat(m)]||c[m]||d[m]||o;return n?a.createElement(h,l(l({ref:t},p),{},{components:n})):a.createElement(h,l({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},50879:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/dashboard-flux-runtime-terraform-crds-d71138c7b2ec852c572c1a807dc18f97.png"}}]);