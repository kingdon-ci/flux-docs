"use strict";(self.webpackChunkweave_gitops_docs=self.webpackChunkweave_gitops_docs||[]).push([[83081],{21408:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(67294),r=n(88746);n(52426);const a={fontSize:16,marginLeft:4,fontVariant:"all-small-caps"};function i(e){let{tiers:t}=e;return s.createElement(r.Z,{title:`This feature is a available on ${t}.`,style:a},t)}},58213:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var s=n(87462),r=(n(67294),n(3905)),a=n(21408);const i={title:"Installation",hide_title:!0},o='Installation <TierLabel tiers="enterprise" />',l={unversionedId:"gitopssets/gitopssets-installation",id:"version-0.38.0/gitopssets/gitopssets-installation",title:"Installation",description:"The gitopssets-controller can be installed in two ways:",source:"@site/versioned_docs/version-0.38.0/gitopssets/gitopssets-installation.mdx",sourceDirName:"gitopssets",slug:"/gitopssets/gitopssets-installation",permalink:"/docs/gitopssets/gitopssets-installation",draft:!1,editUrl:"https://github.com/weaveworks/weave-gitops/edit/main/website/versioned_docs/version-0.38.0/gitopssets/gitopssets-installation.mdx",tags:[],version:"0.38.0",frontMatter:{title:"Installation",hide_title:!0},sidebar:"docs",previous:{title:"Introduction",permalink:"/docs/gitopssets/gitopssets-intro"},next:{title:"Templating from Generators",permalink:"/docs/gitopssets/templating-from-generators"}},p={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installing the gitopssets-controller",id:"installing-the-gitopssets-controller",level:2},{value:"Customising the Generators",id:"customising-the-generators",level:2}],u={toc:c};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,s.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"installation-"},"Installation ",(0,r.kt)(a.Z,{tiers:"enterprise",mdxType:"TierLabel"})),(0,r.kt)("p",null,"The gitopssets-controller can be installed in two ways:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"As part of the Weave GitOps Enterprise installation. (installed by default)"),(0,r.kt)("li",{parentName:"ul"},"As a standalone installation using a Helm chart.")),(0,r.kt)("p",null,"The standalone installation can be useful for leaf clusters that don't have Weave GitOps Enterprise installed."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"Before installing the gitopssets-controller, ensure that you've installed ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/fluxcd/flux2"},"Flux"),"."),(0,r.kt)("h2",{id:"installing-the-gitopssets-controller"},"Installing the gitopssets-controller"),(0,r.kt)("p",null,"To install the gitopssets-controller using a Helm chart, use the following HelmRelease:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: Namespace\nmetadata:\n  name: gitopssets-system\n---\napiVersion: source.toolkit.fluxcd.io/v1beta2\nkind: HelmRepository\nmetadata:\n  name: weaveworks-oci-charts\n  namespace: gitopssets-system\nspec:\n  interval: 1m\n  type: oci\n  url: oci://ghcr.io/weaveworks/charts\n---\napiVersion: helm.toolkit.fluxcd.io/v2beta1\nkind: HelmRelease\nmetadata:\n  name: gitopssets-controller\n  namespace: gitopssets-system\nspec:\n  interval: 10m\n  chart:\n    spec:\n      chart: gitopssets-controller\n      sourceRef:\n        kind: HelmRepository\n        name: weaveworks-oci-charts\n        namespace: gitopssets-system\n      version: 0.15.3\n  install:\n    crds: CreateReplace\n  upgrade:\n    crds: CreateReplace\n")),(0,r.kt)("p",null,"After adding the Namespace, HelmRepository and HelmRelease to a Git repository synced by Flux, commit the changes to complete the installation process."),(0,r.kt)("h2",{id:"customising-the-generators"},"Customising the Generators"),(0,r.kt)("p",null,"Not all generators are enabled by default, this is because not all CRDs are required by the generators."),(0,r.kt)("p",null,"You might want to enable or disable individual generators via the Helm Chart:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"gitopssets-controller:\n  enabled: true\n  controllerManager:\n    manager:\n      args:\n        - --health-probe-bind-address=:8081\n        - --metrics-bind-address=127.0.0.1:8080\n        - --leader-elect\n        # enable the cluster generator which is not enabled by default\n        - --enabled-generators=GitRepository,Cluster,PullRequests,List,APIClient,Matrix,Config\n")))}d.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var s=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},a=Object.keys(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=s.createContext({}),p=function(e){var t=s.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return s.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},m=s.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,g=u["".concat(l,".").concat(m)]||u[m]||d[m]||a;return n?s.createElement(g,i(i({ref:t},c),{},{components:n})):s.createElement(g,i({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:r,i[1]=o;for(var p=2;p<a;p++)i[p]=n[p];return s.createElement.apply(null,i)}return s.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);