"use strict";(self.webpackChunkweave_gitops_docs=self.webpackChunkweave_gitops_docs||[]).push([[45115],{79161:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var a=n(87462),i=(n(67294),n(3905));const o={title:"Displaying custom metadata"},r=void 0,s={unversionedId:"guides/displaying-custom-metadata",id:"version-0.17.0/guides/displaying-custom-metadata",title:"Displaying custom metadata",description:"Weave Gitops lets you add annotations with custom metadata to your",source:"@site/versioned_docs/version-0.17.0/guides/displaying-custom-metadata.mdx",sourceDirName:"guides",slug:"/guides/displaying-custom-metadata",permalink:"/docs/0.17.0/guides/displaying-custom-metadata",draft:!1,editUrl:"https://github.com/weaveworks/weave-gitops/edit/main/website/versioned_docs/version-0.17.0/guides/displaying-custom-metadata.mdx",tags:[],version:"0.17.0",frontMatter:{title:"Displaying custom metadata"},sidebar:"docs",previous:{title:"Configuring OIDC with Dex and GitHub",permalink:"/docs/0.17.0/guides/setting-up-dex"},next:{title:"Using Terraform templates",permalink:"/docs/0.17.0/guides/using-terraform-templates"}},l={},d=[],p={toc:d};function u(e){let{components:t,...o}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Weave Gitops lets you add annotations with custom metadata to your\nflux automations and sources, and they will be displayed in the main UI."),(0,i.kt)("p",null,"For example, you might use this to add links to dashboards, issue\nsystem or another external system, or documentation and comments that\nare visible straight in the main UI."),(0,i.kt)("p",null,"We will use the podinfo application that we installed in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/0.17.0/getting-started/intro"},"getting\nstarted guide")," as an example. Open up the\npodinfo kustomization and add annotations to it so it looks like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="./clusters/my-cluster/podinfo-kustomization.yaml"',title:'"./clusters/my-cluster/podinfo-kustomization.yaml"'},"---\napiVersion: kustomize.toolkit.fluxcd.io/v1beta2\nkind: Kustomization\nmetadata:\n  name: podinfo\n  namespace: flux-system\n// highlight-start\n  annotations:\n    metadata.weave.works/description: |\n      Podinfo is a tiny web application made with Go that showcases best practices of running microservices in Kubernetes.\n      Podinfo is used by CNCF projects like Flux and Flagger for end-to-end testing and workshops.\n    metadata.weave.works/grafana-dashboard: https://grafana.my-org.example.com/d/podinfo-dashboard\n// highlight-end\nspec:\n  interval: 5m0s\n  path: ./kustomize\n  prune: true\n  sourceRef:\n    kind: GitRepository\n    name: podinfo\n  targetNamespace: flux-system\n")),(0,i.kt)("p",null,"When you open the gitops dashboard and navigate to the Kustomization\ndetails, you should see the following:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Application detail view showing custom metadata",src:n(52988).Z,width:"1917",height:"857"})),(0,i.kt)("p",null,"There are some restrictions to keep in mind:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The annotation key has to start with the domain\n",(0,i.kt)("inlineCode",{parentName:"li"},"metadata.weave.works"),". Any other annotations will be ignored."),(0,i.kt)("li",{parentName:"ul"},"The key that will be displayed is whatever you put after the\ndomain, title cased, and with dashes replaced with spaces. Above,\n",(0,i.kt)("inlineCode",{parentName:"li"},"metadata.weave.works/grafana-dashboard"),' was displayed as "Grafana Dashboard".'),(0,i.kt)("li",{parentName:"ul"},"The value can either be a link, or can be plain text. Newlines in\nplain text will be respected."),(0,i.kt)("li",{parentName:"ul"},"The key is subject to certain limitations that kubernetes impose on\nannotations - it must be shorter than 63 characters (not including\nthe domain), and must be an English alphanumeric character, or one of\n",(0,i.kt)("inlineCode",{parentName:"li"},"-._"),". See the ",(0,i.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/#syntax-and-character-set"},"kubernetes\ndocumentation"),"\nfor the full list of restrictions.")))}u.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=d(n),m=i,h=u["".concat(l,".").concat(m)]||u[m]||c[m]||o;return n?a.createElement(h,r(r({ref:t},p),{},{components:n})):a.createElement(h,r({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,r[1]=s;for(var d=2;d<o;d++)r[d]=n[d];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},52988:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/metadata-display-806d62512b4e42186e8b86de8fe6a843.png"}}]);