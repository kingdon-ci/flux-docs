<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-0.26.0 plugin-docs plugin-id-default docs-doc-id-policy/getting-started">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Getting Started | Weave GitOps</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.gitops.weave.works/docs/0.26.0/policy/getting-started/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.26.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.26.0"><meta data-rh="true" name="docsearch:version" content="0.26.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.26.0"><meta data-rh="true" property="og:title" content="Getting Started | Weave GitOps"><meta data-rh="true" name="description" content="Enabling the Weave Policy Engine features in Weave GitOps is done by running the policy agent on the cluster. This section gives an overview of the policy ecosystem and the steps required for installing and running the policy agent on leaf clusters."><meta data-rh="true" property="og:description" content="Enabling the Weave Policy Engine features in Weave GitOps is done by running the policy agent on the cluster. This section gives an overview of the policy ecosystem and the steps required for installing and running the policy agent on leaf clusters."><link data-rh="true" rel="icon" href="/img/favicon_150px.png"><link data-rh="true" rel="canonical" href="https://docs.gitops.weave.works/docs/0.26.0/policy/getting-started/"><link data-rh="true" rel="alternate" href="https://docs.gitops.weave.works/docs/0.26.0/policy/getting-started/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.gitops.weave.works/docs/0.26.0/policy/getting-started/" hreflang="x-default"><script src="https://kit.fontawesome.com/73855c6ec3.js" async></script><link rel="stylesheet" href="/assets/css/styles.3aa777b0.css">
<link rel="preload" href="/assets/js/runtime~main.9c543467.js" as="script">
<link rel="preload" href="/assets/js/main.f2599b95.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Weave GitOps</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/0.26.0/intro-weave-gitops/">Docs</a><a class="navbar__item navbar__link" href="/docs/0.26.0/references/helm-reference/">Reference</a><a class="navbar__item navbar__link" href="/help-and-support/">Help &amp; Support</a><a class="navbar__item navbar__link" href="/feedback-and-telemetry/">Feedback &amp; Telemetry</a><a class="navbar__item navbar__link" href="/security/">Security</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/weaveworks/weave-gitops" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/0.26.0/intro-weave-gitops/">Introducing Weave GitOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introducing Weave GitOps&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/docs/0.26.0/open-source/getting-started/install-OSS/">Weave GitOps Open Source</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.26.0/open-source/getting-started/install-OSS/">Step 1 - Install Weave GitOps Open Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.26.0/open-source/getting-started/ui-OSS/">Step 2 - Explore the Open Source UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.26.0/open-source/getting-started/deploy-OSS/">Step 3 - Deploy an Application</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/0.26.0/enterprise/getting-started/intro-enterprise/">Weave GitOps Enterprise</a><button aria-label="Toggle the collapsible sidebar category &#x27;Weave GitOps Enterprise&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.26.0/configuration/recommended-rbac-configuration/">Access Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.26.0/guides/setting-up-dex/">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.26.0/gitops-run/overview/">GitOps Run</a><button aria-label="Toggle the collapsible sidebar category &#x27;GitOps Run&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.26.0/cluster-management/intro/">Cluster Management</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cluster Management&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.26.0/explorer/intro/">Explorer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Explorer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.26.0/terraform/overview/">Terraform</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.26.0/pipelines/intro/">Pipelines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pipelines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.26.0/workspaces/intro/">Workspaces</a><button aria-label="Toggle the collapsible sidebar category &#x27;Workspaces&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/0.26.0/policy/intro/">Policy</a><button aria-label="Toggle the collapsible sidebar category &#x27;Policy&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/0.26.0/policy/getting-started/">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.26.0/policy/authorization/">Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.26.0/policy/">Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.26.0/policy/weave-policy-profile/">Policy Profile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.26.0/policy/policy-set/">PolicySet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.26.0/policy/policy-configuration/">PolicyConfig</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.26.0/policy/releases/">Profile Releases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.26.0/policy/commit-time-checks/">Commit/Build Time Checks</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.26.0/secrets/intro/">Secrets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Secrets&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.26.0/gitops-templates/intro/">Templates</a><button aria-label="Toggle the collapsible sidebar category &#x27;Templates&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.26.0/gitopssets/intro/">GitOpsSets</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Weave GitOps<!-- --> <b>0.26.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/policy/getting-started/">latest version</a></b> (<!-- -->0.38.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/0.26.0/policy/intro/"><span itemprop="name">Policy</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Getting Started</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.26.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Getting Started <a title="This feature is a available on Enterprise." style="font-size:16px;margin-left:4px;font-variant:all-small-caps">Enterprise</a></h1><p>Enabling the Weave Policy Engine features in Weave GitOps is done by running the policy agent on the cluster. This section gives an overview of the policy ecosystem and the steps required for installing and running the policy agent on leaf clusters.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-policy-ecosystem">The Policy Ecosystem<a href="#the-policy-ecosystem" class="hash-link" aria-label="Direct link to The Policy Ecosystem" title="Direct link to The Policy Ecosystem">​</a></h2><p>The policy ecosystem consists of several moving parts. The two primary components are the <a href="/docs/0.26.0/policy/weave-policy-profile/#policy-agent-configuration">Policy Agent</a> and the <a href="/docs/0.26.0/policy/">Policy CRs</a>. The agent runs in several <a href="/docs/0.26.0/policy/weave-policy-profile/#agent-modes">modes</a>, and uses the Policy CRs to perform validations on different resources. The results of those validations can be written to different <a href="/docs/0.26.0/policy/weave-policy-profile/#policy-validation-sinks">sinks</a>.</p><p>There are two other optional components: the <a href="/docs/0.26.0/policy/policy-set/">PolicySet</a>, and the <a href="/docs/0.26.0/policy/policy-configuration/">PolicyConfig</a>. The PolicySet can be used to filter policies for a specific mode, while the PolicyConfig can be used to override policy parameters during the validation of a certain resource.</p><p><img loading="lazy" alt="Policy Ecosystem" src="/assets/images/policy-ecosystem-29a73c1e7e30b8479c47151cc520305a.png" width="1105" height="465" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-pre-requisites">Installation Pre-requisites<a href="#installation-pre-requisites" class="hash-link" aria-label="Direct link to Installation Pre-requisites" title="Direct link to Installation Pre-requisites">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="weave-gitops">Weave GitOps<a href="#weave-gitops" class="hash-link" aria-label="Direct link to Weave GitOps" title="Direct link to Weave GitOps">​</a></h3><p>You need to have a running instance of Weave GitOps with at least one CAPI provider installed to provision Kubernetes clusters. See <a href="https://docs.gitops.weave.works/docs/installation/" target="_blank" rel="noopener noreferrer">Weave GitOps Installation</a> page for more details about installing Weave GitOps.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="policy-library">Policy Library<a href="#policy-library" class="hash-link" aria-label="Direct link to Policy Library" title="Direct link to Policy Library">​</a></h3><p>For the policy agent to work, it will need a source for the <a href="/docs/0.26.0/policy/">policies</a> that it will enforce in the cluster. Enterprise customers should request access to fork our policy library into their local repositories. Our policy library includes an extensive list of policy CRs that cover a multitude of security and compliance benchmarks.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-the-policy-agent">Install the Policy Agent<a href="#install-the-policy-agent" class="hash-link" aria-label="Direct link to Install the Policy Agent" title="Direct link to Install the Policy Agent">​</a></h2><p>To install the policy agent on a leaf cluster, you should select the <code>weave-policy-agent</code> from the profiles dropdown in the <code>Create Cluster</code> page.</p><p><img loading="lazy" alt="Policy Profile" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABHkAAABcCAYAAAD6QmlOAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAZ25vbWUtc2NyZWVuc2hvdO8Dvz4AAAAqdEVYdENyZWF0aW9uIFRpbWUAVGh1IDAyIE1hciAyMDIzIDE2OjMyOjQ0IEVFVLXd81IAAB1jSURBVHic7d13fBR1/sfx12w2jVTSgBASCJAECL1Jr6ErIkhREdBT7vRO7mznWRCx3U/OcnYQFQEREVGaSBWkRKSHGhJKQkIgpJCQQsru/P4IaISgp4BJ1vfz8cgf2d3ZfHay853vvOf7nTFM0zQREREREREREZFqzVLZBYiIiIiIiIiIyNVTyCMiIiIiIiIi4gAU8oiIiIiIiIiIOACFPCIiIiIiIiIiDkAhj4iIiIiIiIiIA1DIIyIiIiIiIiLiABTyiIiIiIiIiIg4AIU8IiIiIiIiIiIOwPpbF0xKSrqWdYiIiIiIiIiIVEthYWGVXQIAhmmaZmUXISIiIiIiIiIiV0fTtUREREREREREHIBCHhERERERERERB6CQR0RERERERETEASjkERERERERERFxAAp5REREREREREQcgEIeEREREREREREHoJBHRERERERERMQBKOQREREREREREXEACnlERERERERERByAQh4REREREREREQegkEdERERERERExAEo5BERERERERERcQAKeUREREREREREHIBCHhERERERERERB6CQR0RERERERETEAVgruwAREZHqJD4+vrJLEKlUkZGRlV3Cb6JtV6T6qK7tjEhVoJBHRETkV1LnU/6oqntQom1XpOqr7u2MSGXTdC0REREREREREQegkEdERERERERExAEo5BERERERERERcQAKeUREREREREREHIBCHhERERERERERB6CQR0RERERERETEASjkERERERERERFxAAp5REREREREREQcgLWyCwBYn1nChN15HC+0/6bl67tb+LCVJz39na9xZSIiIiIiIiIi1UOVGMkz/ioCHoDjhXYm7M67hhWJiIiIiIiIiFQvVSLkSbqKgOeiqwmJREREfg+FCYt5dlwfWkc0oGF0V0Y88gE7sq60/yph/SMtqFe3LnUv+anX5l9sLql4qbxFdxFewTJ1w/rwnwOl1+2ziTguG9nxG1g8fw5z5q/naE4i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EREREREREREHoJBHRERERERERMQBKOQREREREREREXEACnlERERERERERBxAlbiFuoiIiFRfxvs7KruE68a8u21llyAiIiLyP1PIIyIi8ivFx8dXdgnyO9H/2rHo/ykiIo7OME3TrOwiRERERERERETk6uiaPCIiIiIiIiIiDkAhj4iIiIiIiIiIA1DIIyIiIiIiIiLiABTyiIiIiIiIiIg4AIU8IiIiIiIiIiIOQCGPiIiIiIiIiIgDUMgjIiIiIiIiIuIAFPKIiIiIiIiIiDgAhTwiIiIiIiIiIg5AIY+IiIiIiIiIiANQyCMiIiIiIiIi4gAU8oiIiIiIiIiIOACFPCIiIiIiIiIiDkAhj4iIiIiIiIiIA1DIIyIiIiIiIiLiAKy/dcGkpKRrWYeIiIiIiIiISLUUFhZW2SUAYJimaVZ2ESIiIiIiIiIicnU0XUtERERERERExAEo5BERERERERERcQAKeUREREREREREHIBCHhERERERERERB6CQR0RERERERETEASjkERERERERERFxAAp5REREREREREQcgEIeEREREREREREHoJBHRERERERERMQBKOQREREREREREXEACnlERERERERERBzA/wNL4/ss1aQ5ywAAAABJRU5ErkJggg==" width="1145" height="92" class="img_ev3q"></p><p>You should then configure the <code>values.yaml</code> to pull the policies from your repo into the cluster. This is done by configuring the <code>policySource</code> section. If your policy library repo is private, you will also need to reference the <code>Secret</code> that contains the repo credentials. This is usually the <a href="/docs/0.26.0/cluster-management/getting-started/#add-a-cluster-bootstrap-config">secret</a> you created while bootstrapping flux on the management cluster and is copied to your leaf cluster during creation.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Expand to see an example that creates a new git source</summary><div><div class="collapsibleContent_i85q"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">policySource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ssh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">//git@github.com/weaveworks/policy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">library </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This should be the url of the forked repo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">tag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ./  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Could be a path to the policies dir or a kustomization.yaml file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">secretRef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">pat </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the name of the secret containing the repo credentials</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Expand to see an example that uses an existing git source</summary><div><div class="collapsibleContent_i85q"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">policySource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">sourceRef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Specify the name for an existing GitSource reference</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> GitRepository</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> policy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">library</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> flux</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><p>You can find more about other policy profile configurations <a href="/docs/0.26.0/policy/weave-policy-profile/">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="policies-in-ui">Policies in UI<a href="#policies-in-ui" class="hash-link" aria-label="Direct link to Policies in UI" title="Direct link to Policies in UI">​</a></h2><p>After the leaf cluster is provisioned and the profile is installed, you should now see the policies listed in the Policies tab in Weave GitOps UI.</p><p><img loading="lazy" alt="Policies" src="/assets/images/weave-policies-79e6dfeda5fb02d06b0f4a5725e77f73.png" width="3356" height="1882" class="img_ev3q"></p><p>Now you have a provisioned cluster with these policies enforced by the policy agent.</p><blockquote><p>By default, the policy profile is set up to enforce policies at deployment time using admission controller, which results in blocking any deployment that violates the enforced policies.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prevent-violating-changes">Prevent Violating Changes<a href="#prevent-violating-changes" class="hash-link" aria-label="Direct link to Prevent Violating Changes" title="Direct link to Prevent Violating Changes">​</a></h2><p>Now let&#x27;s try to deploy a Kubernetes deployment that violates the <code>Container Image Pull Policy</code> which is one of the enforced policies.
This policy is violated when the container&#x27;s <code>imagePullPolicy</code> is not set to <code>Always</code>.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Expand for an example of a violating deployment</summary><div><div class="collapsibleContent_i85q"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">1.14.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">imagePullPolicy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><p>Once you apply it, the policy agent will deny this request and show a violation message, and accordingly the deployment will not be created.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="violations-logs-in-ui">Violations Logs in UI<a href="#violations-logs-in-ui" class="hash-link" aria-label="Direct link to Violations Logs in UI" title="Direct link to Violations Logs in UI">​</a></h2><p>You can go to the <code>Violations Log</code> in Weave GitOps UI to view the policy violations of all the connected clusters, and dive into the details of each violation.</p><p>This view shows only the violations resulting from the <a href="/docs/0.26.0/policy/weave-policy-profile/#admission">admission</a> mode by configuring the <a href="/docs/0.26.0/policy/weave-policy-profile/#policy-validation-sinks">events sink</a>.</p><strong>Violations Log</strong><p><img loading="lazy" alt="Violations Logs" src="/assets/images/violations-logs-76fd64e5027509cd16039494f8e4f904.png" width="3360" height="1880" class="img_ev3q"></p><strong>Violations Log Details</strong><p><img loading="lazy" alt="Violation Log Details" src="/assets/images/violations-log-detail-644dce8dc57662d17e64817ed300ade6.png" width="3360" height="2972" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/weaveworks/weave-gitops/edit/main/website/versioned_docs/version-0.26.0/policy/getting-started.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/0.26.0/policy/intro/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/0.26.0/policy/authorization/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Authorization</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-policy-ecosystem" class="table-of-contents__link toc-highlight">The Policy Ecosystem</a></li><li><a href="#installation-pre-requisites" class="table-of-contents__link toc-highlight">Installation Pre-requisites</a><ul><li><a href="#weave-gitops" class="table-of-contents__link toc-highlight">Weave GitOps</a></li><li><a href="#policy-library" class="table-of-contents__link toc-highlight">Policy Library</a></li></ul></li><li><a href="#install-the-policy-agent" class="table-of-contents__link toc-highlight">Install the Policy Agent</a></li><li><a href="#policies-in-ui" class="table-of-contents__link toc-highlight">Policies in UI</a></li><li><a href="#prevent-violating-changes" class="table-of-contents__link toc-highlight">Prevent Violating Changes</a></li><li><a href="#violations-logs-in-ui" class="table-of-contents__link toc-highlight">Violations Logs in UI</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:sales@weave.works" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/weaveworks/weave-gitops" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Follow us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/WeaveworksInc/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/weaveworks" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/weaveworks" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://slack.weave.works/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/WeaveWorksInc" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://weave.works" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/weave-logo.png" alt="Weaveworks Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="35" height="35"><img src="/img/weave-logo.png" alt="Weaveworks Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="35" height="35"></a></div><div class="footer__copyright">Copyright © 2024 Weaveworks</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9c543467.js"></script>
<script src="/assets/js/main.f2599b95.js"></script>
</body>
</html>