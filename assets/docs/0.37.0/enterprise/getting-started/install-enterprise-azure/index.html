<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-0.37.0 plugin-docs plugin-id-default docs-doc-id-enterprise/getting-started/install-enterprise-azure">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Azure and Weave GitOps Enterprise Installation | Weave GitOps</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.gitops.weave.works/docs/0.37.0/enterprise/getting-started/install-enterprise-azure/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.37.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.37.0"><meta data-rh="true" name="docsearch:version" content="0.37.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.37.0"><meta data-rh="true" property="og:title" content="Azure and Weave GitOps Enterprise Installation | Weave GitOps"><meta data-rh="true" name="description" content="Once you successfully create your Kubernetes cluster in Azure Marketplace, follow these steps to Install Weave GitOps Enterprise. These instructions apply to both Azure AKS and Azure ARC clusters—they&#x27;ll behave in the same way."><meta data-rh="true" property="og:description" content="Once you successfully create your Kubernetes cluster in Azure Marketplace, follow these steps to Install Weave GitOps Enterprise. These instructions apply to both Azure AKS and Azure ARC clusters—they&#x27;ll behave in the same way."><link data-rh="true" rel="icon" href="/img/favicon_150px.png"><link data-rh="true" rel="canonical" href="https://docs.gitops.weave.works/docs/0.37.0/enterprise/getting-started/install-enterprise-azure/"><link data-rh="true" rel="alternate" href="https://docs.gitops.weave.works/docs/0.37.0/enterprise/getting-started/install-enterprise-azure/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.gitops.weave.works/docs/0.37.0/enterprise/getting-started/install-enterprise-azure/" hreflang="x-default"><script src="https://kit.fontawesome.com/73855c6ec3.js" async></script><link rel="stylesheet" href="/assets/css/styles.3aa777b0.css">
<link rel="preload" href="/assets/js/runtime~main.9c543467.js" as="script">
<link rel="preload" href="/assets/js/main.f2599b95.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Weave GitOps</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/0.37.0/intro-weave-gitops/">Docs</a><a class="navbar__item navbar__link" href="/docs/0.37.0/references/helm-reference/">Reference</a><a class="navbar__item navbar__link" href="/help-and-support/">Help &amp; Support</a><a class="navbar__item navbar__link" href="/feedback-and-telemetry/">Feedback &amp; Telemetry</a><a class="navbar__item navbar__link" href="/security/">Security</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/weaveworks/weave-gitops" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/0.37.0/intro-weave-gitops/">Introducing Weave GitOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introducing Weave GitOps&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/docs/0.37.0/open-source/getting-started/install-OSS/">Weave GitOps Open Source</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.37.0/open-source/getting-started/install-OSS/">Step 1 - Install Weave GitOps Open Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.37.0/open-source/getting-started/ui-OSS/">Step 2 - Explore the Open Source UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.37.0/open-source/getting-started/deploy-OSS/">Step 3 - Deploy an Application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.37.0/open-source/getting-started/aws-marketplace/">AWS Marketplace</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/0.37.0/enterprise/getting-started/intro-enterprise/">Weave GitOps Enterprise</a><button aria-label="Toggle the collapsible sidebar category &#x27;Weave GitOps Enterprise&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.37.0/enterprise/getting-started/install-enterprise/">Install Weave GitOps Enterprise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.37.0/enterprise/getting-started/install-enterprise-cli/">Install Weave GitOps Enterprise via CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.37.0/enterprise/getting-started/install-enterprise-airgap/">Install Enterprise in Air-gapped Environments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.37.0/enterprise/getting-started/releases-enterprise/">Enterprise Releases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/0.37.0/enterprise/getting-started/install-enterprise-azure/">Azure and Weave GitOps Enterprise Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.37.0/enterprise/getting-started/join-cluster-azure-flux/">Join a Cluster with Azure Flux</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/archives/">Version Archives</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.37.0/backstage/intro/">Backstage</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.37.0/cluster-management/cluster-management-intro/">Cluster Management</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cluster Management&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.37.0/explorer/intro/">Explorer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Explorer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.37.0/gitopssets/gitopssets-intro/">GitOpsSets</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.37.0/guides/oidc/">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.37.0/operations/monitoring/">Operations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.37.0/pipelines/pipelines-intro/">Pipelines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pipelines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.37.0/policy/intro/">Policy</a><button aria-label="Toggle the collapsible sidebar category &#x27;Policy&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.37.0/progressive-delivery/progressive-delivery-flagger-install/">Progressive Delivery</a><button aria-label="Toggle the collapsible sidebar category &#x27;Progressive Delivery&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.37.0/secrets/intro/">Secrets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Secrets&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.37.0/gitops-templates/intro/">Templates</a><button aria-label="Toggle the collapsible sidebar category &#x27;Templates&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.37.0/terraform/terraform-intro/">Terraform</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.37.0/workspaces/intro/">Workspaces</a><button aria-label="Toggle the collapsible sidebar category &#x27;Workspaces&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Weave GitOps<!-- --> <b>0.37.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/enterprise/getting-started/install-enterprise-azure/">latest version</a></b> (<!-- -->0.38.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/0.37.0/intro-weave-gitops/"><span itemprop="name">Introducing Weave GitOps</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/0.37.0/enterprise/getting-started/intro-enterprise/"><span itemprop="name">Weave GitOps Enterprise</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Azure and Weave GitOps Enterprise Installation</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.37.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Azure and Weave GitOps Enterprise Installation<a title="This feature is a available on Enterprise." style="font-size:16px;margin-left:4px;font-variant:all-small-caps">Enterprise</a></h1><p>Once you successfully create your Kubernetes cluster in Azure Marketplace, follow these steps to Install Weave GitOps Enterprise. These instructions apply to both Azure AKS and Azure ARC clusters—they&#x27;ll behave in the same way.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you have already installed <a href="https://fluxcd.io/flux/cmd/" target="_blank" rel="noopener noreferrer">Flux</a>, then Azure Flux will refuse to install.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-choose-the-gitops-option-in-the-marketplace">1. Choose the “GitOps” Option in the Marketplace<a href="#1-choose-the-gitops-option-in-the-marketplace" class="hash-link" aria-label="Direct link to 1. Choose the “GitOps” Option in the Marketplace" title="Direct link to 1. Choose the “GitOps” Option in the Marketplace">​</a></h2><p>Search for Weave GitOps Enterprise in the &quot;Extensions + Applications&quot; of the <a href="https://portal.azure.com/signin/index/" target="_blank" rel="noopener noreferrer">Azure Marketplace</a>. Click the &quot;GitOps&quot; option. This will take you to a screen that presents a first-class item called <code>Type: Flux v2</code>.</p><p>Click GitOps =&gt; Create.</p><p>Add the config name, namespace (default), scope: cluster, type (Flux v2), and continuous reconciliation option. Your entries should look like this:</p><ul><li>Configuration: flux-system</li><li>Namespace: flux-system</li><li>Scope: Cluster</li></ul><p>All of the displayed properties for the Flux objects screen are the same as what you&#x27;d supply to Flux bootstrap.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-install-capz-the-capi-provider">Optional: Install CAPZ, the CAPI Provider<a href="#optional-install-capz-the-capi-provider" class="hash-link" aria-label="Direct link to Optional: Install CAPZ, the CAPI Provider" title="Direct link to Optional: Install CAPZ, the CAPI Provider">​</a></h3><p>If you are planning to manage or connect CAPI clusters to the WE service make sure you first install the CAPI provider. Then during the WE installation process be sure to select the &quot;Enable CAPI support&quot; checkbox.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-apply-the-entitlements-secret">2. Apply the Entitlements Secret<a href="#2-apply-the-entitlements-secret" class="hash-link" aria-label="Direct link to 2. Apply the Entitlements Secret" title="Direct link to 2. Apply the Entitlements Secret">​</a></h2><p>Contact <a href="mailto:sales@weave.works" target="_blank" rel="noopener noreferrer">sales@weave.works</a> for a valid entitlements secret. This will come in the form of a file “entitlements.yaml”. Apply it to the cluster:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f entitlements.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-configure-access-for-writing-to-git-from-the-ui">3. Configure Access for Writing to Git from the UI<a href="#3-configure-access-for-writing-to-git-from-the-ui" class="hash-link" aria-label="Direct link to 3. Configure Access for Writing to Git from the UI" title="Direct link to 3. Configure Access for Writing to Git from the UI">​</a></h2><p><em>(This section is the same as what you&#x27;ll find in the main WGE install documentation.)</em></p><p>Here we provide guidance for GitHub, GitLab, BitBucket Server, and Azure DevOps.</p><div groupid="git-provider" default=""><div value="github" label="GitHub">GitHub requires no additional configuration for OAuth Git access</div><div value="gitlab" label="GitLab"><p>Create a GitLab OAuth application that will request <code>api</code> permissions to create pull requests on your behalf.</p><p>Follow the <a href="https://docs.gitlab.com/ee/integration/oauth_provider.html" target="_blank" rel="noopener noreferrer">GitLab docs</a>.</p><p>The application should have at least these scopes:</p><ul><li><code>api</code></li><li><code>openid</code></li><li><code>email</code></li><li><code>profile</code></li></ul><p>Add callback URLs to the application for each address the UI will be exposed on, e.g.:</p><ul><li><code>https://localhost:8000/oauth/gitlab</code> for port-forwarding and testing</li><li><code>https://git.example.com/oauth/gitlab</code> for production use</li></ul><p>Save your application, taking note of the <strong>Client ID</strong> and <strong>Client Secret</strong>. Save
them into the <code>git-provider-credentials</code> secret, along with:</p><ul><li><code>GIT_HOST_TYPES</code> to tell WGE that the host is gitlab</li><li><code>GITLAB_HOSTNAME</code> where the OAuth app is hosted</li></ul><p><strong>Replace values</strong> in this snippet and run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create secret generic git-provider-credentials --namespace</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">flux-system </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --from-literal</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GITLAB_CLIENT_ID=13457&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --from-literal</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GITLAB_CLIENT_SECRET=24680&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --from-literal</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GITLAB_HOSTNAME=git.example.com&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --from-literal</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GIT_HOST_TYPES=git.example.com=gitlab&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div value="bitbucket-server" label="BitBucket Server"><p>Create a new <a href="https://confluence.atlassian.com/bitbucketserver/configure-an-incoming-link-1108483657.html" target="_blank" rel="noopener noreferrer">incoming application link</a> from
the BitBucket administration dashboard. You will be asked to enter a unique name and the redirect URL for the external application. The redirect URL
should be set to <code>&lt;WGE dashboard URL&gt;/oauth/bitbucketserver</code>. You will also need to select permissions for the application. The minimum set of
permissions needed for WGE to create pull requests on behalf of users is <code>Repositories - Write</code>. An example of configuring these settings is shown below.</p><figure><img loading="lazy" src="/assets/images/oauth-bitbucket-dd2f409a75d5fa495765537b2c3f6f17.png" width="500" class="img_ev3q"><figcaption>Configuring a new incoming application link</figcaption></figure><p>Save your application and take note of the <strong>Client ID</strong> and <strong>Client Secret</strong>. Save
them into the <code>git-provider-credentials</code> secret, along with:</p><ul><li><code>GIT_HOST_TYPES</code> to tell WGE that the host is bitbucket-server</li><li><code>BITBUCKET_SERVER_HOSTNAME</code> where the OAuth app is hosted</li></ul><p><strong>Replace values</strong> in this snippet and run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create secret generic git-provider-credentials --namespace</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">flux-system </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --from-literal</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;BITBUCKET_SERVER_CLIENT_ID=13457&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --from-literal</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;BITBUCKET_SERVER_CLIENT_SECRET=24680&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --from-literal</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;BITBUCKET_SERVER_HOSTNAME=git.example.com&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --from-literal</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GIT_HOST_TYPES=git.example.com=bitbucket-server&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the secret is already present, use the following command to update it using your default editor:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl edit secret generic git-provider-credentials --namespace</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">flux-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>If BitBucket Server is running on the default port (7990), make sure you include the port number in the values of the secret. For example: <code>GIT_HOST_TYPES=git.example.com:7990=bitbucket-server</code></p></div></div></div><div value="azure-devops" label="Azure DevOps"><p>Navigate to <a href="https://app.vsaex.visualstudio.com/app/register" target="_blank" rel="noopener noreferrer">VisualStudio</a> and register a new application, as explained in the <a href="https://learn.microsoft.com/en-us/azure/devops/integrate/get-started/authentication/oauth?view=azure-devops#1-register-your-app" target="_blank" rel="noopener noreferrer">docs</a>. Set the authorization callback URL and select which scopes to grant. Set the callback URL to <code>&lt;WGE dashboard URL&gt;/oauth/azuredevops</code>. </p><p>Select the <code>Code (read and write)</code> scope from the list. This is necessary so that WGE can create pull requests on behalf of users. An example of configuring these settings is shown below.</p><figure><img loading="lazy" src="/assets/images/oauth-azure-devops-fedd005afed739e13a4a8bbd676c3928.png" class="img_ev3q"><figcaption>Creating a new application</figcaption></figure><p>After creating your application, you will be presented with the application settings. Take note of the <code>App ID</code> and <code>Client Secret</code> values—you will use them to configure WGE.</p><figure><img loading="lazy" src="/assets/images/oauth-azure-devops-success-4806f495e958a093e7e20df952e2026e.png" class="img_ev3q"><figcaption>Application settings</figcaption></figure><p>In your cluster, create a secret named <code>git-provider-credentials</code> that contains the <code>App ID</code> and <code>Client Secret</code> values from the newly created application.</p><p><strong>Replace values</strong> in this snippet and run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create secret generic git-provider-credentials --namespace</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">flux-system </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --from-literal</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;AZURE_DEVOPS_CLIENT_ID=&lt;App ID value&gt;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --from-literal</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;AZURE_DEVOPS_CLIENT_SECRET=&lt;Client Secret value&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>WGE is now configured to ask users for authorization the next time a pull request must be created as part of using a template. Note that each user can view and manage which applications they have authorized by navigating to <a href="https://app.vsaex.visualstudio.com/me" target="_blank" rel="noopener noreferrer">https://app.vsaex.visualstudio.com/me</a>.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-configure-your-password">4. Configure Your Password<a href="#4-configure-your-password" class="hash-link" aria-label="Direct link to 4. Configure Your Password" title="Direct link to 4. Configure Your Password">​</a></h2><p>First, install the Weave GitOps Enterprise CLI tool. To do this, you can use either brew or curl.</p><div groupid="weave-gitops-cli" default=""><div value="homebrew" label="Homebrew"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">brew </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> weaveworks/tap/gitops-ee</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div value="curl" label="curl"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> --silent --location </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://artifacts.wge.dev.weave.works/releases/bin/0.27.0/gitops-</span><span class="token string variable" style="color:rgb(191, 199, 213)">$(</span><span class="token string variable function" style="color:rgb(130, 170, 255)">uname</span><span class="token string variable" style="color:rgb(191, 199, 213)">)</span><span class="token string" style="color:rgb(195, 232, 141)">-</span><span class="token string variable" style="color:rgb(191, 199, 213)">$(</span><span class="token string variable function" style="color:rgb(130, 170, 255)">uname</span><span class="token string variable" style="color:rgb(191, 199, 213)"> -m</span><span class="token string variable" style="color:rgb(191, 199, 213)">)</span><span class="token string" style="color:rgb(195, 232, 141)">.tar.gz&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> xz -C /tmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> /tmp/gitops /usr/local/bin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitops version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>Now, to login to the WGE UI, generate a bcrypt hash for your chosen password and store it as a secret in the Kubernetes cluster. There are several different ways to generate a bcrypt hash. Here, we&#x27;ll use <code>gitops get bcrypt-hash</code> from our GitOps CLI.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PASSWORD</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;Make up and insert a brand-new password here&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> -n </span><span class="token variable" style="color:rgb(191, 199, 213)">$PASSWORD</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> gitops get bcrypt-hash </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> kubectl create secret generic cluster-user-auth -n flux-system --from-literal</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">username</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">wego-admin --from-file</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">password</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/dev/stdin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A validation to know it’s working:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get secret -n flux-system cluster-user-auth</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-install-weave-gitops-enterprise-to-your-cluster">5. Install Weave GitOps Enterprise to Your Cluster<a href="#5-install-weave-gitops-enterprise-to-your-cluster" class="hash-link" aria-label="Direct link to 5. Install Weave GitOps Enterprise to Your Cluster" title="Direct link to 5. Install Weave GitOps Enterprise to Your Cluster">​</a></h2><p>First, you&#x27;ll get taken to the Weaveworks portal on the Azure platform, which provides your subscription details.</p><p>Search for Weave GitOps. Pick &quot;View private products&quot; and choose WGE. Fill out the forms, selecting your cluster, then choose &quot;Review and Create&quot;.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-apply-extra-configuration">6. Apply Extra Configuration<a href="#6-apply-extra-configuration" class="hash-link" aria-label="Direct link to 6. Apply Extra Configuration" title="Direct link to 6. Apply Extra Configuration">​</a></h2><p>Additional configuration is done through an optional ConfigMap:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: ConfigMap</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: cluster-service-extra-config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: flux-system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">data:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # disable TLS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NO_TLS: &quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Apply the configuration with:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f cluster-service-extra-config.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># restart the clusters-service for changes to take effect</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n flux-system rollout restart deploy/weave-gitops-enterprise-mccp-cluster-service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="available-configuration-options">Available Configuration Options<a href="#available-configuration-options" class="hash-link" aria-label="Direct link to Available Configuration Options" title="Direct link to Available Configuration Options">​</a></h3><table><thead><tr><th>value</th><th>default</th><th>description</th></tr></thead><tbody><tr><td><code>NO_TLS</code></td><td><code>&quot;false&quot;</code></td><td>disable TLS</td></tr><tr><td><code>CLUSTER_NAME</code></td><td><code>&quot;management&quot;</code></td><td>name of the management cluster</td></tr><tr><td><code>AUTH_METHODS</code></td><td><code>&quot;token-passthrough,user-account&quot;</code></td><td>Which auth methods to use, valid values are &#x27;oidc&#x27;, &#x27;token-pass-through&#x27; and &#x27;user-account&#x27;</td></tr><tr><td><code>OIDC_ISSUER_URL</code></td><td><code>&quot;token-passthrough,user-account&quot;</code></td><td>The URL of the OpenID Connect issuer</td></tr><tr><td><code>OIDC_CLIENT_ID</code></td><td><code>&quot;token-passthrough,user-account&quot;</code></td><td>The client ID for the OpenID Connect client</td></tr><tr><td><code>OIDC_CLIENT_SECRET</code></td><td><code>&quot;token-passthrough,user-account&quot;</code></td><td>The client secret to use with OpenID Connect issuer</td></tr><tr><td><code>OIDC_REDIRECT_URL</code></td><td><code>&quot;token-passthrough,user-account&quot;</code></td><td>The OAuth2 redirect URL</td></tr><tr><td><code>OIDC_TOKEN_DURATION</code></td><td><code>&quot;1h&quot;</code></td><td>The duration of the ID token. It should be set in the format: number + time unit (s,m,h) e.g., 20m</td></tr><tr><td><code>OIDC_CLAIM_USERNAME</code></td><td><code>&quot;email&quot;</code></td><td>JWT claim to use as the user name. By default email, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as sub or name, depending on their provider</td></tr><tr><td><code>OIDC_CLAIM_GROUPS</code></td><td><code>&quot;groups&quot;</code></td><td>JWT claim to use as the user&#x27;s group. If the claim is present it must be an array of strings</td></tr><tr><td><code>CUSTOM_OIDC_SCOPES</code></td><td><code>&quot;groups, openid, email, profile&quot;</code></td><td>Customise the requested scopes for then OIDC authentication flow - openid will always be requested</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-check-that-it-works">7. Check That It Works<a href="#7-check-that-it-works" class="hash-link" aria-label="Direct link to 7. Check That It Works" title="Direct link to 7. Check That It Works">​</a></h2><p>Go to the &quot;services and ingresses&quot; tab in the Azure portal and look for signs that the UI installed. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2><p>WGE will try and automatically install Flux on a new cluster. If this fails for some reason, or if you need a custom Flux installation, you can manually install it before installing WGE.</p><p>Click &quot;Next&quot; and add:</p><ul><li>Source Kind: Git repository</li><li>Repository URL: <!-- -->[your repository URL here]</li><li>Reference Type: Branch</li><li>Repository Type: Private</li></ul><p>And under the &quot;Authentication&quot; section:</p><ul><li>Authentication Source: Provide Authentication here</li><li>SSH Key Authentication: Let the operator generate SSH Keys</li><li>HTTPS User: YOUR_GITHUB_USERNAME</li><li>HTTPS Key: YOUR_GITHUB_USER_PAT (Get one at <a href="https://github.com/settings/tokens" target="_blank" rel="noopener noreferrer">this link</a>. It&#x27;s not the most secure method, but the easiest to get going.)</li></ul><p>Click &quot;Next&quot;. You&#x27;ll see an option to create a Kustomisation, which is optional. To create one:</p><ul><li>Click Create</li><li>Instance name: flux-system</li><li>Path: clusters/default/demo3-azure-flux</li><li>Prune: Ticked</li></ul><p>Click &quot;Save&quot;. Then clicking &quot;Next&quot;, which will give you a summary so you can review your input. Then click &quot;Create&quot;. It will take about five minutes to deploy.</p><p>You&#x27;ll get to a new screen, which at the top-right shows &quot;Notifications&quot; and will display creation of the Flux configuration. When your deployment succeeds, go to the resource and pin to your dashboard. Then go to your terminal to see if it works in kubectl. In the terminal you&#x27;ll get the GitRepository and Kustomizations. You should then get a green &quot;succeeded&quot; checkmark.</p><p>The Kustomisations screen does not provide an option to inspect the path/target namespace—you have to supply the target Namespace in the Kustomization object.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">​</a></h2><p>From this point, you can follow our generalized WGE installation instructions to <a href="/docs/0.37.0/enterprise/getting-started/install-enterprise/#tls-configuration">configure TLS</a> and log into the UI. Installing the Azure Marketplace product installs the Helm chart.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/weaveworks/weave-gitops/edit/main/website/versioned_docs/version-0.37.0/enterprise/getting-started/install-enterprise-azure.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/0.37.0/enterprise/getting-started/releases-enterprise/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Enterprise Releases</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/0.37.0/enterprise/getting-started/join-cluster-azure-flux/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Join a Cluster with Azure Flux</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-choose-the-gitops-option-in-the-marketplace" class="table-of-contents__link toc-highlight">1. Choose the “GitOps” Option in the Marketplace</a><ul><li><a href="#optional-install-capz-the-capi-provider" class="table-of-contents__link toc-highlight">Optional: Install CAPZ, the CAPI Provider</a></li></ul></li><li><a href="#2-apply-the-entitlements-secret" class="table-of-contents__link toc-highlight">2. Apply the Entitlements Secret</a></li><li><a href="#3-configure-access-for-writing-to-git-from-the-ui" class="table-of-contents__link toc-highlight">3. Configure Access for Writing to Git from the UI</a></li><li><a href="#4-configure-your-password" class="table-of-contents__link toc-highlight">4. Configure Your Password</a></li><li><a href="#5-install-weave-gitops-enterprise-to-your-cluster" class="table-of-contents__link toc-highlight">5. Install Weave GitOps Enterprise to Your Cluster</a></li><li><a href="#6-apply-extra-configuration" class="table-of-contents__link toc-highlight">6. Apply Extra Configuration</a><ul><li><a href="#available-configuration-options" class="table-of-contents__link toc-highlight">Available Configuration Options</a></li></ul></li><li><a href="#7-check-that-it-works" class="table-of-contents__link toc-highlight">7. Check That It Works</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:sales@weave.works" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/weaveworks/weave-gitops" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Follow us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/WeaveworksInc/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/weaveworks" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/weaveworks" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://slack.weave.works/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/WeaveWorksInc" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://weave.works" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/weave-logo.png" alt="Weaveworks Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="35" height="35"><img src="/img/weave-logo.png" alt="Weaveworks Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="35" height="35"></a></div><div class="footer__copyright">Copyright © 2024 Weaveworks</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9c543467.js"></script>
<script src="/assets/js/main.f2599b95.js"></script>
</body>
</html>